基础权限模型
==========


资源
----

资源代表平台能够对外提供的功能。

资源以 RESTFul 风格进行描述，URL + Method 作为资源的`唯一标识`。

资源`不`与数据库表一一对应，一个资源可能会操作多个表。

资源以树形结构组织，除根节点外，每个资源有一个父资源。允许存在多个根节点，以森林形式展现资源结构。

根据前后端分离的平台结构，资源分为两种类型：
* `API`：即后台服务端能够响应的请求路径。
* `ROUTE`：与前台应用中定义的路由一一对应。ROUTE 类型资源下会定义一组逻辑相关的 API 类型资源。

> API 类型资源需要定义`数据约束`


数据约束
-------

数据约束定义资源中某属性的范围，相当于 SQL 中的查询条件。

默认按照 `租户` 进行数据约束，可由各模块自行扩展。数据约束可叠加。自定义数据约束时，需定义根据什么属性的什么范围进行约束。


租户
---

租户是指使用平台的一个组织或集团。

> `平台` 和 `系统` 的概念通过可见 `租户` 的范围来区分。`平台` 可见 `所有租户`，`系统` 仅见 `唯一租户` 。

租户下需设定管理员用户，管理各自租户内的权限。

平台内仅 `资源` 为所有租户可见，**其他任何概念都是相同租户内可见，不同租户间隔离**。


应用
---

应用是一组资源的集合，系统以应用为单位为用户提供服务。

应用将资源组织成树形结构的`菜单`，菜单名称无需与资源名称一致。

菜单中仅叶子节点与资源对应，叶子节点选择`ROUTE`类型的资源。

系统提供内置的应用、菜单和资源对应关系，并允许用户自定义。

以应用为单位为`角色`进行权限分配。


角色
---

角色定义应用的使用权限，权限控制至菜单下`资源`。角色以树形结构组织，角色`可继承`，子角色权限范围是父角色权限范围的子集。

权限分为两种类型：
* `可分配`：用户只能将该资源进行分配，不能在系统中使用该资源代表的功能。
* `可使用`：用户可以在系统中见到和使用该资源代表的功能。

角色和用户的关系可通过`角色规则`进行设定，默认无角色规则，可从用户方面选择未设置角色规则的角色。


角色规则
-------

角色规则决定角色与`用户`的关系。

权限模块提供三种规则，并可由各模块自行扩展。
* 所有用户拥有此角色
* 限定用户拥有此角色
* 限定用户不拥有此角色

角色规则中需配置定义规则的界面模板，用来嵌入至角色定义功能的界面中。


用户
---

用户即系统中的账号，需要设定用户名、密码及邮箱。

根据角色规则，可查看用户所拥有的角色，可为用户分配没有角色规则的普通角色。


------------------------------------------------


开放问题
-------

- 用户类别是否必需？

  暂时没有想到使用场景

- 集团模式用户故事是什么？

  需求不太明晰，暂不考虑

- 系统数据需要启停用状态，业务数据应该不需要，在哪区分是系统数据还是业务数据？

  可以考虑增加一个接口标识实体中的数据是可启用/停用的
